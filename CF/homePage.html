<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>管理系统</title>
    <script src="../../resources/js/common/commonJS.js" charset="utf-8"></script>
    <script src="../../resources/js/common/commonCss.js" charset="utf-8"></script>
    <script src="../../resources/js/common/switchLeftMenu.js" charset="utf-8"></script>
    <script src="../../resources/js/common/commonSetting.js" charset="utf-8"></script>

    <script type="text/javascript">
        $(function () {
            
            
            // 权限控制
            var roleNameArray = localStorage.getItem("roleNameArray");
            var split = roleNameArray.split(",");
            for (var item in split) {
                var roleName = split[item];
                if ("admin" == roleName) {
                    // do something
                }
                if ("vcs" == roleName) {
                    $('#systemManage').hide();
                    $('#userMgmtId').hide();
                    $('#roleMgmtId').hide();
                    $('#commonCodeMgmtId').hide();
                    $('#appCompanyMgmtId').hide();
                    $('#dataSyncMgmtId').hide();
                    $('#gridAreaMgmtId').hide();
                }
                if ("tmd" == roleName) {
                    $('#systemManage').hide();
                    $('#userMgmtId').hide();
                    $('#roleMgmtId').hide();
                    $('#commonCodeMgmtId').hide();
                    $('#appCompanyMgmtId').hide();
                    $('#dataSyncMgmtId').hide();
                    $('#gridAreaMgmtId').hide();
                }
            }

            $('#iframeId').height($(window).height() - $('#navId').height());
            $(window).resize(function () {
                $('#iframeId').height($(window).height() - $('#navId').height());
            });
        });

        function confirmMsg(msg) {
            BootstrapDialog.confirm(
                    {
                        title: '删除',
                        message: msg,
                        btnCancelLabel: '取消',
                        btnOKLabel: '确定',
                        btnOKClass: 'btn-danger',
                        callback: function (result) {
                            if (result) {
                                document.getElementById("iframeId").contentWindow.doDeleteConfirmCallBack();
                            } else {
                                return;
                            }
                        }
                    });
        }

        function confirmEditScore() {
            $('#myModal').modal('show');
        }

        function closeModel() {
            $('#myModal').modal('hide')
        }

        function submitScore() {
            var score = $('#editScore').val();
            document.getElementById("iframeId").contentWindow.doConfirmEditScoreCallBack(score);
        }

        function logoutMain() {
            var url = getServerUrl() + "/auth/logout";
            $.ajax({
                type: 'DELETE',
                url: url,
                contentType: "application/json",
                headers: {'x-me-token': localStorage.getItem("token")},
                success: function (data) {
                    if (!data.success) {
                        alert("logout 失败");
                    } else {
                        window.location.href = "../login/login.html";
                    }
                }
            });
            localStorage.removeItem("token");
        }
    </script>
</head>
<body style="overflow-y: hidden;">
<div id="wrapper">
    <div>
        <!-- 模态框（Modal） -->
        <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                            &times;
                        </button>
                        <h4 class="modal-title" id="myModalLabel">
                            修改
                        </h4>
                    </div>
                    <div class="modal-body">
                        请输入修改过后的绩效分数：<input type="text" id="editScore" class="form-control">
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">关闭
                        </button>
                        <button type="button" class="btn btn-primary" onclick="submitScore()">
                            提交
                        </button>
                    </div>
                </div><!-- /.modal-content -->
            </div><!-- /.modal -->
        </div>
    </div>
    <div>
        <nav id="navId" class='navbar navbar-default navbar-static-top' role='navigation' style='margin-bottom: 0'>
            <div class='navbar-header'>
                <button type='button' class='navbar-toggle' data-toggle='collapse' data-target='.navbar-collapse'>
                    <span class='sr-only'>Toggle navigation</span>
                    <span class='icon-bar'></span>
                    <span class='icon-bar'></span>
                    <span class='icon-bar'></span>
                </button>
                <a class='navbar-brand' href='javascript:void(0)'>ME ADMIN</a>
            </div>
            <ul class='nav navbar-top-links navbar-right'>
                <li class='dropdown'>
                    <a class='dropdown-toggle' data-toggle='dropdown' href='#'>
                        <i class='fa fa-user fa-fw'></i> <i class='fa fa-caret-down'></i>
                    </a>
                    <ul class='dropdown-menu dropdown-user'>
                        <li><a href='#'><i class='fa fa-user fa-fw'></i> User Profile</a></li>
                        <li><a href='#'><i class='fa fa-gear fa-fw'></i> Settings</a></li>
                        <li class='divider'></li>
                        <li><a href='javascript:void(0)' onclick='logoutMain()'><i class='fa fa-sign-out fa-fw'></i>
                            Logout</a>
                        </li>
                    </ul>
                </li>
            </ul>
            <div class='navbar-default sidebar' role='navigation'>
                <div class='sidebar-nav navbar-collapse'>
                    <ul class='nav' id='side-menu'>
                        <li id="welcomeId"><a class='active' href='javascript:void(0)'
                                              onclick='switchMenu(this,"/welcome/welcomePage")'><i
                                class='fa fa-home fa-fw'></i> 首页</a></li>
                        <li id="systemManage">
                            <a href='#'><i class='fa fa-cogs fa-fw'></i> 系统管理<span class='fa arrow'></span></a>
                            <ul class='nav nav-second-level'>
                                <li id="userMgmtId"><a href='javascript:void(0)'
                                                       onclick='switchMenu(this,"/userMgmt/userListPage")'><i
                                        class='fa fa-user-circle-o fa-fw'></i> 用户管理</a></li>
                                <li id="roleMgmtId"><a href='javascript:void(0)'
                                                       onclick='switchMenu(this,"/roleMgmt/roleListPage")'><i
                                        class='fa fa-paper-plane fa-fw'></i> 角色管理</a></li>
                                <li id="commonCodeMgmtId"><a href='javascript:void(0)'
                                                             onclick='switchMenu(this,"/commonCodeMgmt/commonCodeListPage")'><i
                                        class='fa fa-wrench fa-fw'></i> 公共配置信息管理</a></li>
                                <li id="appCompanyMgmtId"><a href='javascript:void(0)'
                                                             onclick='switchMenu(this,"/appCompanyMgmt/appCompanyListPage")'><i
                                        class='fa fa-handshake-o fa-fw'></i> 第三方APP公司管理</a></li>
                                <li id="dataSyncMgmtId"><a href='javascript:void(0)'
                                                           onclick='switchMenu(this,"/dataSyncMgmt/dataSyncPage")'><i
                                        class='fa fa-refresh fa-fw'></i> 数据同步</a></li>
                                <li id="gridAreaMgmtId"><a href='javascript:void(0)'
                                                           onclick='switchMenu(this,"/gridAreaMgmt/gridAreaPage")'><i
                                        class='fa fa-square-o fa-fw'></i> 格子信息管理</a></li>
                            </ul>
                        </li>

                        <li id="baseConfig">
                            <a href='#'><i class='fa fa-plane fa-fw'></i> 基础配置<span class='fa arrow'></span></a>
                            <ul class='nav nav-second-level'>
                                <li id="taxiStandMgmtId"><a href='javascript:void(0)'
                                                            onclick='switchMenu(this,"/taxiStandMgmt/taxiStandListPage")'><i
                                        class='fa fa-map-marker fa-fw'></i> 站点信息管理</a></li>
                                <li id="billRateMgmtId"><a href='javascript:void(0)'
                                                           onclick='switchMenu(this,"/billRateMgmt/billRateListPage")'><i
                                        class='fa fa-jpy fa-fw'></i> 计费规则配置管理</a></li>
                            </ul>
                        </li>

                        <li id="vehicleAndDriverManage">
                            <a href='#'><i class='fa fa-info-circle fa-fw'></i> 车辆池管理<span class='fa arrow'></span></a>
                            <ul class='nav nav-second-level'>
                                <li id="dmCompanyMgmtId"><a href='javascript:void(0)'
                                                            onclick='switchMenu(this,"/dmCompanyMgmt/dmCompanyListPage")'><i
                                        class='fa fa-cog fa-fw'></i> 出租车管理公司信息</a></li>
                                <li id="dmVehicleMgmtId"><a href='javascript:void(0)'
                                                            onclick='switchMenu(this,"/dmVehicleMgmt/dmVehicleListPage")'><i
                                        class='fa fa-info-circle fa-fw'></i> 运营车辆基本信息管理</a></li>
                                <li id="taxiDriverMgmtId"><a href='javascript:void(0)'
                                                             onclick='switchMenu(this,"/taxiDriverMgmt/taxiDriverListPage")'><i
                                        class='fa fa-taxi fa-fw'></i> 巡游出租车驾驶员信息管理</a></li>
                                <li id="phvDriverMgmtId"><a href='javascript:void(0)'
                                                            onclick='switchMenu(this,"/phvDriverMgmt/phvDriverListPage")'><i
                                        class='fa fa-car fa-fw'></i> 网约出租车驾驶员信息管理</a></li>
                                <li id="priorityMgmtId"><a href='javascript:void(0)'
                                                           onclick='switchMenu(this,"/priorityMgmt/priorityListPage")'><i
                                        class='fa fa-binoculars fa-fw'></i> 优先级管理</a></li>
                            </ul>
                        </li>

                        <li id="operateManage">
                            <a href='#'><i class='fa fa-arrows fa-fw'></i> 运营管理<span class='fa arrow'></span></a>
                            <ul class='nav nav-second-level'>
                                <li id="driverTripMgmtId"><a href='javascript:void(0)'
                                                             onclick='switchMenu(this,"/driverTripMgmt/driverTripListPage")'><i
                                        class='fa fa-bars fa-fw'></i> 司机运营管理</a></li>
                                <li id="passenTripMgmtId"><a href='javascript:void(0)'
                                                             onclick='switchMenu(this,"/driverTripMgmt/driverTripListPage")'><i
                                        class='fa fa-bars fa-fw'></i> 乘客运营管理</a></li>
                            </ul>
                        </li>

                        <li id="clearingManage">
                            <a href='#'><i class='fa fa-arrows fa-fw'></i> 清算管理<span class='fa arrow'></span></a>
                            <ul class='nav nav-second-level'>
                                <li id="meClearingMgmtId"><a href='javascript:void(0)'
                                                             onclick='switchMenu(this,"/clearingMgmt/meClearingMgmt")'><i
                                        class='fa fa-bars fa-fw'></i> 交易平台账户结算</a></li>

                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </div>
    <div>
        <iframe id="iframeId" name="childFrame" frameborder="0" width="100%" height="100%" scrolling="auto"
                onload="changeFrameHeight()"
                src="../welcome/welcomePage.html">
        </iframe>
    </div>
</div>
</body>
</html>